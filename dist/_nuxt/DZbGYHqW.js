import{C as g,D as w,E as C,F as E,G as R,H as A,e as y,I as O,J as k}from"./LbSMJhVq.js";function D(a){var r;const s=g();return((r=s==null?void 0:s.ssrContext)==null?void 0:r.head)||(s==null?void 0:s.runWithContext(()=>{if(w())return C(E)}))}const o=new Map;let I,m,p,i;function M(a){const s=R().path,r=D(),{currentRoute:f}=A(),l=A();let h=!1,c=a;const d={dispose(){const e=[...o.get(s)],n=e.findIndex(u=>u[0]===c);if(n===-1)return;const t=e[n][1];t==null||t.dispose(),e.splice(n,1),o.set(s,e)},patch(e){const n=[...o.get(s)],t=n.findIndex(x=>x[0]===c);if(t===-1)return;const[,u]=n[t];c=e,u==null||u.patch(c),n.splice(t,1,[c,u]),o.set(s,n)}};if(o.has(s)){const e=r==null?void 0:r.push(a),n=o.get(s)||[];o.set(s,[...n,[a,e]])}else{const e=r==null?void 0:r.push(a);o.set(s,[[a,e]])}return y(d.dispose),I||(I=l.beforeEach(()=>{i=f.value.path})),m||(m=l.afterEach(()=>{p=f.value.path})),O(()=>{let e=o.get(i);e&&(e=e.map(([n,t])=>(t==null||t.dispose(),[n,t])),o.set(i,e)),h=!0}),k(()=>{if(h){let e=o.get(p);e&&(e=e.map(([n,t])=>{t==null||t.dispose();const u=r==null?void 0:r.push(n);return[n,u]}),o.set(p,e))}}),d}export{M as u};
